<div class="content">
  <div class="container">
    <h1>Sistema de Gerenciamento - Motos e Servi√ßos</h1>

    <!-- Resumo dos dados -->
    <div class="summary-bar">
      <div class="summary-item">
        <span class="summary-number">{{ motos|length }}</span>
        <span class="summary-label">Motos</span>
      </div>
      <div class="summary-item">
        <span class="summary-number">{{ servicos|length }}</span>
        <span class="summary-label">Servi√ßos</span>
      </div>
      <div class="summary-item">
        <span class="summary-number">{{ agendamentos|length }}</span>
        <span class="summary-label">Agendamentos</span>
      </div>
      <div class="summary-item">
        <span class="summary-number">{{ ordens_servico|length }}</span>
        <span class="summary-label">Ordens de Servi√ßo</span>
      </div>
    </div>


    <!-- Navigation bar -->
    <div
      class="navigation-bar"
      style="
        margin-bottom: 20px;
        padding: 15px;
        background: #ecf0f1;
        border-radius: 8px;
        text-align: center;
      "
    >
      <a
        href="{% url 'ordens-servico' %}"
        class="btn-navigation"
        style="
          background: #e67e22;
          color: white;
          padding: 8px 16px;
          text-decoration: none;
          border-radius: 5px;
          margin: 0 5px;
        "
        >üîß Ver Todas as Ordens de Servi√ßo</a
      >
      <a
        href="{% url 'agendar-servico' %}"
        class="btn-navigation"
        style="
          background: #3498db;
          color: white;
          padding: 8px 16px;
          text-decoration: none;
          border-radius: 5px;
          margin: 0 5px;
        "
        >üìÖ Novo Agendamento</a
      >
    </div>

    <!-- Tabela de Motos -->
    <div class="section">
      <h2>üèçÔ∏è Motos Cadastradas</h2>
      <table class="data-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Marca</th>
            <th>Modelo</th>
            <th>Ano</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody>
          {% for moto in motos %}
          <tr>
            <td>{{ moto.id }}</td>
            <td>{{ moto.marca }}</td>
            <td>{{ moto.modelo }}</td>
            <td>{{ moto.ano }}</td>
            <td><a href="#" class="btn-detalhes">Ver Detalhes</a></td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="no-data">Nenhuma moto cadastrada.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Tabela de Servi√ßos -->
    <div class="section">
      <h2>
        üîß Servi√ßos Dispon√≠veis
      </h2>

      <table class="data-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome do Servi√ßo</th>
            <th>Descri√ß√£o</th>
            <th>Data Cria√ß√£o</th>
            <th>Hora Cria√ß√£o</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody>
          {% for servico in servicos %}
          <tr>
            <td><strong>#{{ servico.id }}</strong></td>
            <td><strong>{{ servico.nome }}</strong></td>
            <td>{{ servico.descricao|default:"Sem descri√ß√£o dispon√≠vel" }}</td>
            <td>{{ servico.data|date:"d/m/Y" }}</td>
            <td>{{ servico.hora|time:"H:i" }}</td>
            <td>
              <a href="#" class="btn-detalhes">Ver Detalhes</a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6" class="no-data">
              <i class="fas fa-exclamation-circle"></i>
              Nenhum servi√ßo cadastrado no sistema.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Tabela de Agendamentos (Motos + Servi√ßos) -->
    <div class="section">
      <h2>
        üìÖ Agendamentos de Servi√ßos
      </h2>

      {% if not agendamentos %}
      <div class="alert alert-info">
        <i class="fas fa-info-circle"></i>
        <strong>Informa√ß√£o:</strong> N√£o h√° agendamentos cadastrados ainda.
        <br />Os agendamentos aparecem quando um cliente agenda um servi√ßo para
        uma moto. <br /><br />
        <strong>Para criar um agendamento:</strong>
        <ol style="margin-top: 10px; margin-left: 20px">
          <li>
            Acesse a p√°gina de
            <a href="{% url 'agendar-servico' %}" style="color: #3498db"
              >agendamento de servi√ßos</a
            >
          </li>
          <li>Preencha os dados da moto e selecione o servi√ßo</li>
          <li>Escolha data e hor√°rio</li>
          <li>Confirme o agendamento</li>
        </ol>
      </div>
      {% endif %}

      <table class="data-table">
        <thead>
          <tr>
            <th>Moto</th>
            <th>Modelo</th>
            <th>Ano</th>
            <th>Servi√ßo</th>
            <th>Data</th>
            <th>Hora</th>
            <th>Descri√ß√£o</th>
            <th>a√ßoes</th>
          </tr>
        </thead>
        <tbody>
    {% for agendamento in agendamentos %}
      <tr>
        <td>{{ agendamento.moto.marca }}</td>
        <td>{{ agendamento.moto.modelo }}</td>
        <td>{{ agendamento.moto.ano }}</td>
        <td>{{ agendamento.servico.nome }}</td>
        <td>{{ agendamento.data_hora|date:"d/m/Y" }}</td>
        <td>{{ agendamento.data_hora|time:"H:i" }}</td>
        <td>{{ agendamento.servico.descricao|default:"Sem descri√ß√£o" }}</td>
        <td><a href="#" class="btn-detalhes">Ver Detalhes</a></td>
      </tr>
    {% endfor %}
  </tbody>
      </table>
    </div>

    <!-- Tabela de Ordens de Servi√ßo (Resumo) -->
    <div class="section">
      <h2>
        üîß Ordens de Servi√ßo  
      </h2>

      {% if ordens_servico %}
      <div
        class="alert alert-success"
        style="background: #d4edda; border-left-color: #27ae60"
      >
        <i class="fas fa-check-circle" style="color: #27ae60"></i>
        <strong>Ordens de servi√ßo ativas!</strong>
        <a href="{% url 'ordens-servico' %}" style="color: #27ae60"
          >Ver todas as ordens de servi√ßo ‚Üí</a
        >
      </div>

      <table class="data-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Cliente</th>
            <th>Servi√ßo</th>
            <th>Custo</th>
            <th>Status</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody>
          {% for ordem in ordens_servico|slice:":5" %}
          <tr>
            <td><strong>#{{ ordem.id }}</strong></td>
            <td>{{ ordem.agendamento.cliente.usuario.username }}</td>
            <td>{{ ordem.agendamento.servico.nome }}</td>
            <td class="custo">
              {% if ordem.custo %} R$ {{ ordem.custo|floatformat:2 }} {% else %}
              <span class="text-muted">A definir</span>
              {% endif %}
            </td>
            <td>
              <span class="status-badge status-ordem-{{ ordem.status }}">
                {{ ordem.get_status_display }}
              </span>
            </td>
            <td>
              <a href="{% url 'ordens-servico' %}" class="btn-detalhes"
                >Ver Detalhes</a
              >
            </td>
          </tr>
          {% endfor %} {% if ordens_servico|length > 5 %}
          <tr>
            <td
              colspan="6"
              style="text-align: center; padding: 15px; background: #f8f9fa"
            >
              <a href="{% url 'ordens-servico' %}" class="btn-more">
                Ver todas as {{ ordens_servico|length }} ordens de servi√ßo ‚Üí
              </a>
            </td>
          </tr>
          {% endif %}
        </tbody>
      </table>

      {% else %}
      <div class="alert alert-info">
        <i class="fas fa-info-circle"></i>
        <strong>Informa√ß√£o:</strong> N√£o h√° ordens de servi√ßo cadastradas ainda.
        <br />As ordens de servi√ßo s√£o criadas automaticamente quando
        agendamentos s√£o processados pelos mec√¢nicos.
      </div>
      {% endif %}
    </div>

    <style>
      .content {
        font-family: "Arial", sans-serif;
        background-color: #f5f5f5;
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        padding: 30px;
      }

      h1 {
        text-align: center;
        color: #2c3e50;
        margin-bottom: 30px;
        font-size: 2.2em;
        border-bottom: 3px solid #3498db;
        padding-bottom: 15px;
      }

      .summary-bar {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-bottom: 40px;
        padding: 20px;
        background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        border-radius: 10px;
        border: 1px solid #dee2e6;
      }

      .summary-item {
        text-align: center;
        padding: 15px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        min-width: 100px;
        transition: transform 0.2s ease;
      }

      .summary-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      }

      .summary-number {
        display: block;
        font-size: 2em;
        font-weight: bold;
        color: #3498db;
        margin-bottom: 5px;
      }

      .summary-label {
        display: block;
        font-size: 0.9em;
        color: #7f8c8d;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      h2 {
        color: #34495e;
        margin-bottom: 20px;
        font-size: 1.5em;
        border-left: 4px solid #3498db;
        padding-left: 15px;
      }

      .section {
        margin-bottom: 40px;
      }

      .data-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .data-table thead {
        background: linear-gradient(135deg, #3498db, #2980b9);
        color: white;
      }

      .data-table th,
      .data-table td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #ecf0f1;
      }

      .data-table th {
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.9em;
        letter-spacing: 0.5px;
      }

      .data-table tbody tr:hover {
        background-color: #f8f9fa;
        transform: translateY(-1px);
        transition: all 0.2s ease;
      }

      .data-table tbody tr:nth-child(even) {
        background-color: #f9f9f9;
      }

      .data-table tbody tr {
        border: 1px solid transparent;
        transition: all 0.2s ease;
      }

      .data-table tbody tr:hover {
        background-color: #e8f4fd !important;
        border-color: #3498db;
        box-shadow: 0 2px 5px rgba(52, 152, 219, 0.2);
      }

      .no-data {
        text-align: center;
        color: #7f8c8d;
        font-style: italic;
        padding: 30px !important;
        background: #f8f9fa;
        border-radius: 8px;
      }

      .no-data i {
        margin-right: 8px;
        color: #e74c3c;
      }

      .btn-detalhes {
        background: linear-gradient(135deg, #27ae60, #229954);
        color: white;
        text-decoration: none;
        padding: 8px 16px;
        border-radius: 5px;
        font-size: 0.9em;
        transition: all 0.3s ease;
        display: inline-block;
      }

      .btn-detalhes:hover {
        background: linear-gradient(135deg, #229954, #1e8449);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        text-decoration: none;
        color: white;
      }

      /* Status badges */
      .status-badge {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.8em;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .status-agendado {
        background-color: #3498db;
        color: white;
      }

      .status-em_andamento {
        background-color: #f39c12;
        color: white;
      }

      .status-concluido {
        background-color: #27ae60;
        color: white;
      }

      .status-cancelado {
        background-color: #e74c3c;
        color: white;
      }

      
      /* Responsividade */
      @media (max-width: 768px) {
        .container {
          padding: 15px;
          margin: 10px;
        }

        h1 {
          font-size: 1.8em;
        }

        .data-table {
          font-size: 0.9em;
        }

        .data-table th,
        .data-table td {
          padding: 8px 10px;
        }
      }

      @media (max-width: 600px) {
        .data-table thead {
          display: none;
        }

        .data-table,
        .data-table tbody,
        .data-table tr,
        .data-table td {
          display: block;
        }

        .data-table tr {
          border: 1px solid #ccc;
          margin-bottom: 10px;
          border-radius: 5px;
          padding: 10px;
        }

        .data-table td {
          border: none;
          position: relative;
          padding-left: 50%;
        }

        .data-table td:before {
          content: attr(data-label) ": ";
          position: absolute;
          left: 6px;
          width: 45%;
          text-align: left;
          font-weight: bold;
          color: #2c3e50;
        }
      }
    </style>
  </div>
</div>
